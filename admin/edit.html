<template x-if="$store.editobj.mode && $store.showedit">
    <div class="relative z-10" aria-labelledby="modal-title" role="dialog" aria-modal="true">
        <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"></div>

        <div class="fixed inset-0 z-10 overflow-y-auto">
            <div class="flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0">

                <div
                    class="relative transform overflow-hidden rounded-lg bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:p-6">
                    <div class="absolute right-0 top-0 hidden pr-4 pt-4 sm:block">
                        <button type="button" @click="closeEdit($event)"
                            class="rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">
                            <span class="sr-only">Close</span>
                            <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                                stroke="currentColor" aria-hidden="true">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                            </svg>
                        </button>
                    </div>
                    <div class="sm:flex sm:items-start">
                        <div class="w-full mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left">
                            <h3 class="text-base font-semibold leading-6 text-gray-900" x-text="$store.editobj.title">
                            </h3>
                            <template x-for="field in $store.editobj.fields">
                                <div class="mt-2">
                                    <label class="block text-sm font-medium leading-6"
                                        :class="field.htmltype == 'checkbox'?'mt-2 flex items-center':''">
                                        <template x-if="field.htmltype == 'checkbox'">
                                            <input type="checkbox" :class="field.edit_class" x-model="field.value"
                                                class="mr-2 h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600" />
                                        </template>
                                        <template x-if="field.required">
                                            <span class="text-red-600">*</span>
                                        </template>
                                        <span class="text-gray-700" x-text="field.label"></span>
                                        <!--
                                        <span :class="field.htmltype == 'checkbox'?'ml-1':''" class="text-gray-300"
                                            x-text="field.name"></span>
                                        -->
                                    </label>
                                    <div class="mt-2">
                                        <template x-if="field.htmltype == 'textarea'">
                                            <textarea rows="3" x-model="field.value"
                                                class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"></textarea>
                                        </template>
                                        <template x-if="field.htmltype == 'text'">
                                            <input type="text" :class="field.edit_class" x-model="field.value"
                                                class="block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"
                                                x-placeholder="field.placeholder" />
                                        </template>
                                        <template x-if="field.htmltype == 'json'">
                                            <textarea rows="3" x-model="field.value"
                                                class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"></textarea>
                                        </template>
                                        <template x-if="field.htmltype == 'select'">
                                            <select x-model="field.value">
                                                <option value="" disabled>Select A Option</option>
                                                <template x-for="opt in field.attribute.choices">
                                                    <option :value="opt.value" x-text="opt.label"
                                                        :selected="opt.value == field.value"></option>
                                                </template>
                                            </select>
                                        </template>
                                        <template x-if="field.htmltype == 'foreign'">
                                            <select x-model="field.value">
                                                <option value="" disabled>Select A Value</option>
                                                <template x-for="opt in field.values">
                                                    <option :value="opt.value" x-text="opt.label"
                                                        :selected="opt.value == field.value"></option>
                                                </template>
                                            </select>
                                        </template>
                                    </div>
                                </div>
                            </template>
                        </div>
                    </div>

                    <template x-if="$store.editobj.mode == 'edit'">
                        <div class="flex mt-5 sm:mt-4 sm:flex justify-between">
                            <button type="button" x-on:click="$store.queryresult.ondelete_one($event)"
                                class="inline-flex w-full rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-500 sm:ml-3 sm:w-auto">Delete</button>
                            <button type="button" x-on:click="$store.editobj.doSave($event)"
                                class="mt-3 inline-flex w-full rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto">Save</button>
                        </div>
                    </template>
                    <template x-if="$store.editobj.mode == 'create'">
                        <div class="flex mt-5 sm:mt-4 sm:flex justify-end">
                            <button type="button" x-on:click="$store.editobj.doCreate($event)"
                                class="mt-3 inline-flex w-full rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto">Create</button>
                        </div>
                    </template>
                </div>
            </div>
        </div>
    </div>
</template>